# ü§ñ Baraka Ai Telegram Bot

Telegram –±–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —á–µ—Ä–µ–∑ Baraka Ai API.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ —Ç–µ–∫—Å—Ç
- üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- üì∏ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —á–µ–∫–æ–≤ (OCR)
- ü§ñ AI –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úîÔ∏è –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- üí∞ –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞

## üìã –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd bot
pip install -r requirements.txt
```

### 2. –°–æ–∑–¥–∞–π –±–æ—Ç–∞ –≤ Telegram

1. –ù–∞–π–¥–∏ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å `/newbot`
3. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π —Ç–æ–∫–µ–Ω

### 3. –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `.env`:

```bash
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather

# API URL (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω Baraka Ai API)
API_BASE_URL=http://localhost:8001

# OpenAI (—É–∂–µ –µ—Å—Ç—å)
OPENAI_API_KEY=sk-proj-...
```

### 4. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
python -m bot.main
```

–ò–ª–∏:

```bash
cd bot
python main.py
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã:

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
- `/register username email password` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `/login username password` - –í—Ö–æ–¥
- `/balance` - –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å
- `/help` - –°–ø—Ä–∞–≤–∫–∞

### –ü—Ä–∏–º–µ—Ä—ã:

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
```
/register ivan ivan@mail.com pass123
```

**–í—Ö–æ–¥:**
```
/login ivan pass123
```

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–º:**
```
–∫—É–ø–∏–ª –∫–æ—Ñ–µ –∑–∞ 25000 —Å—É–º
```

**–ì–æ–ª–æ—Å–æ–≤–æ–µ:**
```
üé§ –ó–∞–ø–∏—Å—å: "–ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ —Ç–∞–∫—Å–∏ —Ç—Ä–∏–¥—Ü–∞—Ç—å —Ç—ã—Å—è—á"
```

**–§–æ—Ç–æ —á–µ–∫–∞:**
```
üì∏ –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ —á–µ–∫–∞
```

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –¢–µ–∫—Å—Ç/–ì–æ–ª–æ—Å/–§–æ—Ç–æ
    ‚Üì
AI –ø–∞—Ä—Å–∏—Ç (—á–µ—Ä–µ–∑ API /ai/parse-transaction)
    ‚Üì
–ë–æ—Ç: "–Ø –ø–æ–Ω—è–ª —Ç–∞–∫: –†–∞—Å—Ö–æ–¥ 25000 —Å—É–º, –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç. –í–µ—Ä–Ω–æ?"
    ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí ‚úÖ –î–∞ / ‚ùå –ù–µ—Ç
    ‚Üì
–î–∞ ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î (POST /transactions)
–ù–µ—Ç ‚Üí –ü—Ä–æ—Å–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
bot/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ main.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ api_client.py    # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Baraka Ai API
‚îú‚îÄ‚îÄ user_storage.py  # –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ pending —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
‚îú‚îÄ‚îÄ handlers.py      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ requirements.txt # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ data/            # –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ users.json   # –¢–æ–∫–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚îî‚îÄ‚îÄ pending.json # –û–∂–∏–¥–∞—é—â–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `bot/data/users.json`
- –ü–∞—Ä–æ–ª–∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è login)
- JWT —Ç–æ–∫–µ–Ω—ã –¥–µ–π—Å—Ç–≤—É—é—Ç 30 –¥–Ω–µ–π

## üêõ –î–µ–±–∞–≥

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:

```
2025-12-14 19:00:00 - __main__ - INFO - ü§ñ Starting Baraka Ai Telegram Bot...
2025-12-14 19:00:05 - httpx - INFO - HTTP Request: POST /auth/login
```

## üöÄ Production

### –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (systemd):

```bash
sudo nano /etc/systemd/system/midas-bot.service
```

```ini
[Unit]
Description=Baraka Ai Telegram Bot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/midas
ExecStart=/usr/bin/python3 -m bot.main
Restart=always

[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl start midas-bot
sudo systemctl enable midas-bot
```

## ‚ùì FAQ

**Q: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**
A: –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω –≤ `.env` –∏ —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω

**Q: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
A: –£–±–µ–¥–∏—Å—å —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `API_BASE_URL`

**Q: AI –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç**
A: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `OPENAI_API_KEY` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ API

---

**Made with ‚ù§Ô∏è for easy expense tracking**
